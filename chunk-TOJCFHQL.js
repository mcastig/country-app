import{$ as xe,A as Q,B as i,C as o,D as u,E as G,F as g,G as T,H as Y,I as a,J as y,K as L,L as V,M as he,N as Z,O as J,Q as ue,R as se,S as R,T as be,U as ve,V as K,W as Se,_,a as le,aa as N,b as pe,ba as W,c as C,ca as Re,d as A,e as P,f as F,g as U,h as me,i as p,j as de,k as I,l as D,m as q,n as j,o as ye,p as f,q as fe,r as $,s as c,t as m,u as z,v as d,w as ge,x,y as Ce,z as H}from"./chunk-HGWGSOEE.js";function v(n){return n?.injector||de(v),be(pe(le({},n),{loader:void 0,stream:e=>{let t,r=()=>t.unsubscribe();e.abortSignal.addEventListener("abort",r);let s=fe({value:void 0}),l,E=new Promise(k=>l=k);function ce(k){s.set(k),l?.(s),l=void 0}return t=n.loader(e).subscribe({next:k=>ce({value:k}),error:k=>ce({error:k}),complete:()=>{l&&ce({error:new Error("Resource completed before producing a value")}),e.abortSignal.removeEventListener("abort",r)}}),E}}))}var O={production:!0,companyName:"Country",companyLastName:"App",API_URL:"https://restcountries.com/v3.1"};var M=class{static mapRestCountryToCountry(e){return{cca2:e.cca2,flag:e.flag,flagSvg:e.flags.svg,name:e.translations.spa.common??"No Spanish Name",capital:e.capital,population:e.population,region:e.region,subRegion:e.subregion}}static mapRestCountryToCountryArray(e){return e.map(this.mapRestCountryToCountry)}};var h=class n{http=p(Se);queryCacheCapital=new Map;queryCacheCountry=new Map;queryCacheRegion=new Map;searchByCapital(e){return e=e.toLocaleLowerCase(),this.queryCacheCapital.has(e)?C(this.queryCacheCapital.get(e)??[]):this.http.get(`${O.API_URL}/capital/${e}`).pipe(P(t=>M.mapRestCountryToCountryArray(t)),U(t=>this.queryCacheCapital.set(e,t)),F(t=>A(()=>new Error(`Not found any country with this term: ${e}`))))}searchByCountry(e){return e=e.toLocaleLowerCase(),this.queryCacheCountry.has(e)?C(this.queryCacheCountry.get(e)??[]):this.http.get(`${O.API_URL}/name/${e}`).pipe(P(t=>M.mapRestCountryToCountryArray(t)),U(t=>this.queryCacheCountry.set(e,t)),F(t=>A(()=>new Error(`Not found any country with this term: ${e}`))))}searchByRegion(e){return this.queryCacheRegion.has(e)?C(this.queryCacheRegion.get(e)??[]):this.http.get(`${O.API_URL}/region/${e}`).pipe(P(t=>M.mapRestCountryToCountryArray(t)),U(t=>this.queryCacheCountry.set(e,t)),F(t=>A(()=>new Error(`Not found any country with this region: ${e}`))))}searchCountryByAlphaCode(e){return this.http.get(`${O.API_URL}/alpha/${e}`).pipe(P(t=>M.mapRestCountryToCountryArray(t)),P(t=>t.at(0)),F(t=>A(()=>new Error(`Not found any country with this code: ${e}`))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})};var X=class n{location=p(ve);goBack(){this.location.back()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-not-found"]],decls:7,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","mt-10"],["xmlns","http://www.w3.org/2000/svg","width","76","height","76","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2zm-6.5-7.5l-5 5m0-5l5 5"],[1,"link-primary","cursor-pointer",3,"click"]],template:function(t,r){t&1&&(i(0,"section",0)(1,"h1"),a(2,"Not found country..."),o(),q(),i(3,"svg",1),u(4,"path",2),o(),j(),i(5,"a",3),g("click",function(){return r.goBack()}),a(6,"Return"),o()())},encapsulation:2})};var ee=class n{country=f.required();currentYear=ue(()=>new Date().getFullYear());static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["country-information-page"]],inputs:{country:[1,"country"]},decls:40,vars:15,consts:[[1,"mx-10"],[1,"text-3xl"],[1,"stats","shadow"],[1,"stat","place-items-center","mx-5"],[1,"stat-title"],[1,"stat-value"],[1,"stat-desc"],[1,"stat","place-items-center"],[1,"stat-value","text-secondary"],[1,"stat-desc","text-secondary"],["tabindex","0",1,"diff","aspect-16/9"],["role","img",1,"diff-item-1"],[1,"blur","brightness-75",3,"alt","src"],["role","img","tabindex","0",1,"diff-item-2"],[3,"alt","src"],[1,"diff-resizer"]],template:function(t,r){t&1&&(i(0,"section",0)(1,"h1",1),a(2),o()(),i(3,"section",2)(4,"div",3)(5,"div",4),a(6,"Population: "),o(),i(7,"div",5),a(8),Z(9,"number"),o(),i(10,"div",6),a(11),o()(),i(12,"div",7)(13,"div",4),a(14,"Name"),o(),i(15,"div",8),a(16),o(),i(17,"div",9),a(18),o()(),i(19,"div",7)(20,"div",4),a(21,"Sub Region"),o(),i(22,"div",5),a(23),o(),i(24,"div",6),a(25),o()(),i(26,"div",7)(27,"div",4),a(28,"Flag"),o(),i(29,"div",5),a(30),o(),i(31,"div",6),a(32),o()()(),i(33,"section")(34,"figure",10)(35,"div",11),u(36,"img",12),o(),i(37,"div",13),u(38,"img",14),o(),u(39,"div",15),o()()),t&2&&(c(2),y(r.country().name),c(6),y(J(9,13,r.country().population)),c(3),L("From ",r.currentYear(),""),c(5),y(r.country().name),c(2),y(r.country().region),c(5),y(r.country().subRegion),c(2),y(r.country().region),c(5),y(r.country().flag),c(2),y(r.country().region),c(4),d("alt",r.country().name)("src",r.country().flagSvg,$),c(2),d("alt",r.country().name)("src",r.country().flagSvg,$))},dependencies:[K],encapsulation:2})};function _e(n,e){n&1&&u(0,"app-not-found")}function we(n,e){n&1&&(i(0,"h1",0),a(1,"Loading..."),o())}function Ee(n,e){if(n&1&&u(0,"country-information-page",1),n&2){let t=T();d("country",t.countryResource.value())}}var te=class n{countryCode=p(_).snapshot.params.code;countryService=p(h);countryResource=v({request:()=>({code:this.countryCode}),loader:({request:e})=>this.countryService.searchCountryByAlphaCode(e.code)});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-country-page"]],decls:3,vars:3,consts:[[1,"text-3xl"],[3,"country"]],template:function(t,r){t&1&&z(0,_e,1,0,"app-not-found")(1,we,2,0,"h1",0)(2,Ee,1,1,"country-information-page",1),t&2&&(x(r.countryResource.error()?0:-1),c(),x(r.countryResource.isLoading()?1:-1),c(),x(r.countryResource.hasValue()?2:-1))},dependencies:[X,ee],encapsulation:2})};var ne=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["country-top-menu"]],decls:24,vars:0,consts:[[1,"p-4","w-full"],[1,"menu","bg-base-200","sm:menu-horizontal","rounded-box"],["routerLink","by-capital","routerLinkActive","btn-primary",1,"btn"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.8 19.2L16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8L4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1l3 2l2 3l1-1v-3l3-2l3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2"],["routerLink","by-country","routerLinkActive","btn-primary",1,"btn"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["width","20","height","12","x","2","y","6","rx","2"],["cx","12","cy","12","r","2"],["d","M6 12h.01M18 12h.01"],["routerLink","by-region","routerLinkActive","btn-primary",1,"btn"],["cx","11","cy","4","r","2"],["cx","18","cy","8","r","2"],["cx","20","cy","16","r","2"],["d","M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045q-.64-2.065-2.7-2.705A3.5 3.5 0 0 1 5.5 10Z"]],template:function(t,r){t&1&&(i(0,"nav",0)(1,"ul",1)(2,"li")(3,"a",2),q(),i(4,"svg",3),u(5,"path",4),o(),a(6," By Capital "),o()(),j(),i(7,"li")(8,"a",5),q(),i(9,"svg",3)(10,"g",6),u(11,"rect",7)(12,"circle",8)(13,"path",9),o()(),a(14," By Country "),o()(),j(),i(15,"li")(16,"a",10),q(),i(17,"svg",3)(18,"g",6),u(19,"circle",11)(20,"circle",12)(21,"circle",13)(22,"path",14),o()(),a(23," By Region "),o()()()())},dependencies:[W,Re],encapsulation:2})};var re=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-country-layout"]],decls:3,vars:0,consts:[[1,"px-4"]],template:function(t,r){t&1&&(u(0,"country-top-menu"),i(1,"section",0),u(2,"router-outlet"),o())},dependencies:[xe,ne],encapsulation:2})};var B=class n{placeholder=f("Search...");searchValue=ye();debounceTime=f(1e3);initialValue=f();inputValue=R(()=>this.initialValue()??"");debounceEffect=se(e=>{let t=this.inputValue(),r=setTimeout(()=>{this.searchValue.emit(t)},this.debounceTime());e(()=>{clearTimeout(r)})});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["country-search-input"]],inputs:{placeholder:[1,"placeholder"],debounceTime:[1,"debounceTime"],initialValue:[1,"initialValue"]},outputs:{searchValue:"searchValue"},decls:5,vars:2,consts:[["txtSearch",""],[1,"flex","flex-row","gap-2","mt-2"],["type","text","autofocus","",1,"input","input-bordered","mr-2","w-56",3,"keyup.enter","keyup","placeholder","value"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){if(t&1){let s=G();i(0,"section",1)(1,"input",2,0),g("keyup.enter",function(){I(s);let E=Y(2);return D(r.searchValue.emit(E.value))})("keyup",function(){I(s);let E=Y(2);return D(r.inputValue.set(E.value))}),o(),i(3,"button",3),g("click",function(){I(s);let E=Y(2);return D(r.searchValue.emit(E.value))}),a(4," Search "),o()()}t&2&&(c(),d("placeholder",r.placeholder())("value",r.inputValue()))},encapsulation:2})};var ke=n=>["/country/by",n],Te=(n,e)=>e.cca2;function Le(n,e){if(n&1&&(i(0,"tr")(1,"td"),a(2),o(),i(3,"td"),a(4),o(),i(5,"td"),u(6,"img",1),o(),i(7,"td"),a(8),o(),i(9,"td"),a(10),o(),i(11,"td")(12,"span",2),a(13),Z(14,"number"),o()(),i(15,"td")(16,"a",3),a(17," More information "),o()()()),n&2){let t=e.$implicit,r=e.$index;c(2),y(r+1),c(2),y(t.flag),c(2),d("src",t.flagSvg,$)("alt",t.name),c(2),y(t.name),c(2),y(t.capital),c(3),L(" ",J(14,8,t.population)," "),c(3),d("routerLink",he(10,ke,t.cca2))}}function Me(n,e){if(n&1&&(i(0,"tr")(1,"td",4),a(2),o()()),n&2){let t=T();c(2),L(" ",t.errorMessage()," ")}}function Pe(n,e){n&1&&(i(0,"tr")(1,"td",4),a(2," Not found results... "),o()())}function Ie(n,e){n&1&&(i(0,"tr")(1,"td",4),a(2," Searching countries... "),o()())}var w=class n{countries=f.required();errorMessage=f();isLoading=f(!1);isEmpty=f(!1);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["country-list"]],inputs:{countries:[1,"countries"],errorMessage:[1,"errorMessage"],isLoading:[1,"isLoading"],isEmpty:[1,"isEmpty"]},decls:22,vars:3,consts:[[1,"table","table-md","mt-2","w-full"],[1,"w-10",3,"src","alt"],[1,"badge","badge-secondary"],[1,"link-primary","cursor-pointer",3,"routerLink"],["colspan","8",1,"text-center"]],template:function(t,r){t&1&&(i(0,"section",0)(1,"thead")(2,"tr")(3,"th"),a(4,"#"),o(),i(5,"th"),a(6,"icon"),o(),i(7,"th"),a(8,"Flag"),o(),i(9,"th"),a(10,"Name"),o(),i(11,"th"),a(12,"Capital"),o(),i(13,"th"),a(14,"Population"),o(),u(15,"th"),o()(),i(16,"tbody"),H(17,Le,18,12,"tr",null,Te),z(19,Me,3,1,"tr")(20,Pe,3,0,"tr")(21,Ie,3,0,"tr"),o()()),t&2&&(c(17),Q(r.countries()),c(2),x(r.errorMessage()?19:-1),c(),x(r.countries().length===0&&!r.isLoading()?20:-1),c(),x(r.isLoading()?21:-1))},dependencies:[W,K],encapsulation:2})};var De=()=>[],oe=class n{countryService=p(h);activatedRoute=p(_);router=p(N);queryParam=this.activatedRoute.snapshot.queryParamMap.get("query")??"";query=R(()=>this.queryParam);cleanQueryParams(){this.router.navigate(["/country/by-capital"],{queryParams:{}})}countryResource=v({request:()=>({query:this.query()}),loader:({request:e})=>e.query?(this.router.navigate(["/country/by-capital"],{queryParams:{query:e.query}}),this.countryService.searchByCapital(e.query)):(this.cleanQueryParams(),C([]))});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-by-capital-page"]],decls:2,vars:7,consts:[["placeholder","Search by Capital...",3,"searchValue","debounceTime","initialValue"],[3,"countries","errorMessage","isEmpty","isLoading"]],template:function(t,r){if(t&1&&(i(0,"country-search-input",0),g("searchValue",function(l){return r.query.set(l)}),o(),u(1,"country-list",1)),t&2){let s,l;d("debounceTime",600)("initialValue",r.query()),c(),d("countries",(s=r.countryResource.value())!==null&&s!==void 0?s:V(6,De))("errorMessage",r.countryResource.error())("isEmpty",((l=r.countryResource.value())==null?null:l.length)===0)("isLoading",r.countryResource.isLoading())}},dependencies:[B,w],encapsulation:2})};var qe=()=>[],ie=class n{countryService=p(h);activatedRoute=p(_);router=p(N);queryParam=this.activatedRoute.snapshot.queryParamMap.get("query")??"";query=R(()=>this.queryParam);cleanQueryParams(){this.router.navigate(["/country/by-country"],{queryParams:{}})}countryResource=v({request:()=>({query:this.query()}),loader:({request:e})=>e.query?(this.router.navigate(["/country/by-country"],{queryParams:{query:e.query}}),this.countryService.searchByCountry(e.query)):(this.cleanQueryParams(),C([]))});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-by-country-page"]],decls:2,vars:7,consts:[["placeholder","Search by Country...",3,"searchValue","debounceTime","initialValue"],[3,"countries","errorMessage","isEmpty","isLoading"]],template:function(t,r){if(t&1&&(i(0,"country-search-input",0),g("searchValue",function(l){return r.query.set(l)}),o(),u(1,"country-list",1)),t&2){let s,l;d("debounceTime",600)("initialValue",r.query()),c(),d("countries",(s=r.countryResource.value())!==null&&s!==void 0?s:V(6,qe))("errorMessage",r.countryResource.error())("isEmpty",((l=r.countryResource.value())==null?null:l.length)===0)("isLoading",r.countryResource.isLoading())}},dependencies:[B,w],encapsulation:2})};var Ve=()=>[];function Ne(n,e){if(n&1){let t=G();i(0,"button",6),g("click",function(){let s=I(t).$implicit,l=T();return D(l.selectRegion(s))}),a(1),o()}if(n&2){let t=e.$implicit,r=T();ge("btn-primary",r.selectedRegion()===t),c(),L(" ",t," ")}}function Be(n){return n=n.toLowerCase(),{africa:"Africa",americas:"Americas",asia:"Asia",europe:"Europe",oceania:"Oceania",antarctic:"Antarctic"}[n]??"Americas"}var ae=class n{countryService=p(h);activatedRoute=p(_);router=p(N);queryParam=this.activatedRoute.snapshot.queryParamMap.get("region")??"";selectedRegion=R(()=>Be(this.queryParam));regions=["Africa","Americas","Asia","Europe","Oceania","Antarctic"];selectRegion(e){this.selectedRegion.set(e)}countryResource=v({request:()=>({region:this.selectedRegion()}),loader:({request:e})=>e.region?(this.router.navigate(["/country/by-region"],{queryParams:{region:e.region}}),this.countryService.searchByRegion(e.region)):C([])});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-by-region"]],decls:9,vars:5,consts:[[1,"text-2xl"],[1,"text-lg"],[1,"row","mt-2"],[1,"flex-col"],[1,"btn","mr-2","w-[100px]",3,"btn-primary"],[3,"countries","errorMessage","isEmpty","isLoading"],[1,"btn","mr-2","w-[100px]",3,"click"]],template:function(t,r){if(t&1&&(i(0,"h1",0),a(1,"By region"),o(),i(2,"h3",1),a(3,"Select a region"),o(),i(4,"section",2)(5,"div",3),H(6,Ne,2,3,"button",4,Ce),o()(),u(8,"country-list",5)),t&2){let s,l;c(6),Q(r.regions),c(2),d("countries",(s=r.countryResource.value())!==null&&s!==void 0?s:V(4,Ve))("errorMessage",r.countryResource.error())("isEmpty",((l=r.countryResource.value())==null?null:l.length)===0)("isLoading",r.countryResource.isLoading())}},dependencies:[w],encapsulation:2})};var Ae=[{path:"",component:re,children:[{path:"by-capital",component:oe},{path:"by-country",component:ie},{path:"by-region",component:ae},{path:"by/:code",component:te},{path:"**",redirectTo:"by-capital"}]}],fn=Ae;export{Ae as countryRoutes,fn as default};
